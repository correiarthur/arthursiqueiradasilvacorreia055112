{
  "openapi" : "3.1.0",
  "info" : {
    "contact" : {
      "name" : "Polícia Judiciária Civil do Estado de Mato Grosso",
      "url" : "https://geia.pjc.mt.gov.br"
    },
    "license" : {
      "name" : "Licença de uso privado da Polícia Judiciária Civil MT",
      "url" : "https://geia.pjc.mt.gov.br"
    },
    "title" : "Gerenciador de Pets API",
    "version" : "1.0"
  },
  "components" : {
    "securitySchemes" : {
      "jwt" : {
        "type" : "http",
        "scheme" : "bearer",
        "bearerFormat" : "jwt"
      },
      "SecurityScheme" : {
        "type" : "http",
        "scheme" : "bearer",
        "bearerFormat" : "JWT",
        "description" : "Authentication"
      }
    },
    "schemas" : {
      "AnexoResponseDto" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "integer",
            "format" : "int64"
          },
          "nome" : {
            "type" : "string"
          },
          "contentType" : {
            "type" : "string"
          },
          "url" : {
            "type" : "string"
          }
        }
      },
      "AuthRequestDto" : {
        "type" : "object",
        "properties" : {
          "username" : {
            "type" : "string",
            "examples" : [ "admin" ]
          },
          "password" : {
            "type" : "string",
            "examples" : [ "admin" ]
          }
        }
      },
      "AuthResponseDto" : {
        "type" : "object",
        "properties" : {
          "access_token" : {
            "type" : "string"
          },
          "refresh_token" : {
            "type" : "string"
          },
          "expires_in" : {
            "type" : "integer",
            "format" : "int64"
          },
          "refresh_expires_in" : {
            "type" : "integer",
            "format" : "int64"
          }
        }
      },
      "PagedPetResponseDto" : {
        "type" : "object",
        "properties" : {
          "page" : {
            "type" : "integer",
            "format" : "int64"
          },
          "size" : {
            "type" : "integer",
            "format" : "int64"
          },
          "total" : {
            "type" : "integer",
            "format" : "int64"
          },
          "pageCount" : {
            "type" : "integer",
            "format" : "int64"
          },
          "content" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/PetResponseDto"
            }
          }
        }
      },
      "PagedProprietarioResponseDto" : {
        "type" : "object",
        "properties" : {
          "page" : {
            "type" : "integer",
            "format" : "int64"
          },
          "size" : {
            "type" : "integer",
            "format" : "int64"
          },
          "total" : {
            "type" : "integer",
            "format" : "int64"
          },
          "pageCount" : {
            "type" : "integer",
            "format" : "int64"
          },
          "content" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/ProprietarioResponseDto"
            }
          }
        }
      },
      "PetRequestDto" : {
        "type" : "object",
        "required" : [ "nome" ],
        "properties" : {
          "nome" : {
            "type" : "string",
            "examples" : [ "Rex" ],
            "maxLength" : 100,
            "description" : "Nome do pet"
          },
          "raca" : {
            "type" : "string",
            "examples" : [ "Labrador Retriever" ],
            "maxLength" : 100,
            "description" : "Raça do pet"
          },
          "idade" : {
            "type" : "integer",
            "format" : "int32",
            "examples" : [ 3 ],
            "description" : "Idade do pet em anos"
          }
        }
      },
      "PetResponseCompletoDto" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "integer",
            "format" : "int32"
          },
          "nome" : {
            "type" : "string"
          },
          "raca" : {
            "type" : "string"
          },
          "idade" : {
            "type" : "integer",
            "format" : "int32"
          },
          "foto" : {
            "$ref" : "#/components/schemas/AnexoResponseDto"
          },
          "tutores" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/ProprietarioResponseDto"
            }
          }
        }
      },
      "PetResponseDto" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "integer",
            "format" : "int32"
          },
          "nome" : {
            "type" : "string"
          },
          "raca" : {
            "type" : "string"
          },
          "idade" : {
            "type" : "integer",
            "format" : "int32"
          },
          "foto" : {
            "$ref" : "#/components/schemas/AnexoResponseDto"
          }
        }
      },
      "ProprietarioRequestDto" : {
        "type" : "object",
        "required" : [ "nome", "telefone" ],
        "properties" : {
          "nome" : {
            "type" : "string",
            "examples" : [ "João da Silva" ],
            "maxLength" : 100,
            "description" : "Nome completo do usuário"
          },
          "email" : {
            "type" : "string",
            "examples" : [ "joao.silva@email.com" ],
            "maxLength" : 150,
            "description" : "Endereço de e-mail"
          },
          "telefone" : {
            "type" : "string",
            "examples" : [ "(11) 91234-5678" ],
            "maxLength" : 20,
            "description" : "Número de telefone com DDD"
          },
          "endereco" : {
            "type" : "string",
            "examples" : [ "Rua das Flores, 123, Bairro Centro, São Paulo - SP" ],
            "maxLength" : 200,
            "description" : "Endereço residencial"
          },
          "cpf" : {
            "type" : "integer",
            "format" : "int64",
            "examples" : [ 12345678901 ],
            "description" : "Número do CPF apenas com dígitos"
          }
        }
      },
      "ProprietarioResponseComPetsDto" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "integer",
            "format" : "int32"
          },
          "nome" : {
            "type" : "string"
          },
          "email" : {
            "type" : "string"
          },
          "telefone" : {
            "type" : "string"
          },
          "endereco" : {
            "type" : "string"
          },
          "cpf" : {
            "type" : "integer",
            "format" : "int64"
          },
          "foto" : {
            "$ref" : "#/components/schemas/AnexoResponseDto"
          },
          "pets" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/PetResponseDto"
            }
          }
        }
      },
      "ProprietarioResponseDto" : {
        "type" : "object",
        "properties" : {
          "id" : {
            "type" : "integer",
            "format" : "int32"
          },
          "nome" : {
            "type" : "string"
          },
          "email" : {
            "type" : "string"
          },
          "telefone" : {
            "type" : "string"
          },
          "endereco" : {
            "type" : "string"
          },
          "cpf" : {
            "type" : "integer",
            "format" : "int64"
          },
          "foto" : {
            "$ref" : "#/components/schemas/AnexoResponseDto"
          }
        }
      }
    }
  },
  "tags" : [ {
    "name" : "Autenticação",
    "description" : "Operações para autenticação e gerenciamento de tokens."
  }, {
    "name" : "Pets",
    "description" : "Operações para gerenciamento de pets."
  }, {
    "name" : "Tutores",
    "description" : "Operações para gerenciamento de tutores de pets."
  }, {
    "name" : "Tutores e Pets",
    "description" : "Operações para vincular e desvincular pets de tutores."
  } ],
  "paths" : {
    "/autenticacao/login" : {
      "post" : {
        "summary" : "Autenticar usuário",
        "description" : "Autentica um usuário com base em nome de usuário(admin) e senha(admin), retornando tokens de acesso e de atualização (refresh).",
        "tags" : [ "Autenticação" ],
        "requestBody" : {
          "description" : "Credenciais de acesso do usuário.",
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/AuthRequestDto"
              }
            }
          },
          "required" : true
        },
        "responses" : {
          "200" : {
            "description" : "Autenticação bem-sucedida. Retorna os tokens.",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/AuthResponseDto"
                }
              }
            }
          },
          "401" : {
            "description" : "Credenciais inválidas. Usuário ou senha incorretos."
          },
          "400" : {
            "description" : "Bad Request"
          }
        }
      }
    },
    "/autenticacao/refresh" : {
      "put" : {
        "summary" : "Renovar token de acesso",
        "description" : "Gera um novo token de acesso utilizando um token de atualização (refresh token) válido. O refresh token deve ser enviado no cabeçalho 'Authorization'.",
        "tags" : [ "Autenticação" ],
        "responses" : {
          "200" : {
            "description" : "Token de acesso renovado com sucesso.",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/AuthResponseDto"
                }
              }
            }
          },
          "401" : {
            "description" : "Token de atualização (refresh token) inválido, expirado ou não fornecido."
          }
        },
        "security" : [ {
          "jwt" : [ ]
        } ]
      }
    },
    "/v1/pets" : {
      "post" : {
        "summary" : "Cadastrar um novo pet",
        "description" : "Cria um novo registro de pet no sistema.",
        "tags" : [ "Pets" ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/PetRequestDto"
              }
            }
          },
          "required" : true
        },
        "responses" : {
          "201" : {
            "description" : "Pet cadastrado com sucesso.",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/PetResponseDto"
                }
              }
            }
          },
          "400" : {
            "description" : "Bad Request"
          }
        },
        "security" : [ {
          "jwt" : [ ]
        } ]
      },
      "get" : {
        "summary" : "Listar pets",
        "description" : "Retorna uma lista paginada de pets, com opção de filtros.",
        "tags" : [ "Pets" ],
        "parameters" : [ {
          "name" : "nome",
          "in" : "query",
          "schema" : {
            "type" : "string"
          }
        }, {
          "name" : "page",
          "in" : "query",
          "schema" : {
            "type" : "integer",
            "format" : "int32",
            "default" : 0,
            "minimum" : 0
          }
        }, {
          "name" : "raca",
          "in" : "query",
          "schema" : {
            "type" : "string"
          }
        }, {
          "name" : "size",
          "in" : "query",
          "schema" : {
            "type" : "integer",
            "exclusiveMinimum" : 0,
            "format" : "int32",
            "default" : 10
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "Lista de pets retornada com sucesso.",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/PagedPetResponseDto"
                }
              }
            }
          }
        },
        "security" : [ {
          "jwt" : [ ]
        } ]
      }
    },
    "/v1/pets/{id}" : {
      "delete" : {
        "summary" : "Excluir um pet",
        "description" : "Remove o registro de um pet do sistema.",
        "tags" : [ "Pets" ],
        "parameters" : [ {
          "description" : "ID do pet a ser excluído.",
          "required" : true,
          "name" : "id",
          "in" : "path",
          "schema" : {
            "type" : "integer",
            "format" : "int64"
          }
        } ],
        "responses" : {
          "204" : {
            "description" : "Pet excluído com sucesso."
          }
        },
        "security" : [ {
          "jwt" : [ ]
        } ]
      },
      "put" : {
        "summary" : "Atualizar um pet existente",
        "description" : "Altera os dados de um pet já cadastrado.",
        "tags" : [ "Pets" ],
        "parameters" : [ {
          "description" : "ID do pet a ser atualizado.",
          "required" : true,
          "name" : "id",
          "in" : "path",
          "schema" : {
            "type" : "integer",
            "format" : "int64"
          }
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/PetRequestDto"
              }
            }
          },
          "required" : true
        },
        "responses" : {
          "200" : {
            "description" : "Pet atualizado com sucesso.",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/PetResponseDto"
                }
              }
            }
          },
          "400" : {
            "description" : "Bad Request"
          }
        },
        "security" : [ {
          "jwt" : [ ]
        } ]
      },
      "get" : {
        "summary" : "Buscar pet por ID",
        "description" : "Retorna os dados completos de um pet específico, com base no ID fornecido.",
        "tags" : [ "Pets" ],
        "parameters" : [ {
          "description" : "ID do pet a ser consultado.",
          "required" : true,
          "name" : "id",
          "in" : "path",
          "schema" : {
            "type" : "integer",
            "format" : "int64"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "Pet encontrado e retornado com sucesso.",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/PetResponseCompletoDto"
                }
              }
            }
          },
          "404" : {
            "description" : "Pet não encontrado para o ID informado."
          }
        },
        "security" : [ {
          "jwt" : [ ]
        } ]
      }
    },
    "/v1/pets/{id}/fotos" : {
      "post" : {
        "summary" : "Adicionar uma foto a um pet",
        "description" : "Faz o upload de uma foto e a associa a um pet existente.",
        "tags" : [ "Pets" ],
        "parameters" : [ {
          "description" : "ID do pet que receberá a foto.",
          "required" : true,
          "name" : "id",
          "in" : "path",
          "schema" : {
            "type" : "integer",
            "format" : "int64"
          }
        } ],
        "requestBody" : {
          "content" : {
            "multipart/form-data" : {
              "schema" : {
                "type" : "object",
                "properties" : {
                  "foto" : {
                    "type" : "string",
                    "format" : "binary"
                  }
                }
              }
            }
          },
          "required" : true
        },
        "responses" : {
          "201" : {
            "description" : "Foto adicionada com sucesso.",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/AnexoResponseDto"
                }
              }
            }
          }
        },
        "security" : [ {
          "jwt" : [ ]
        } ]
      }
    },
    "/v1/pets/{id}/fotos/{fotoId}" : {
      "delete" : {
        "summary" : "Remover a foto de um pet",
        "description" : "Exclui uma foto específica associada a um pet.",
        "tags" : [ "Pets" ],
        "parameters" : [ {
          "description" : "ID da foto a ser removida.",
          "required" : true,
          "name" : "fotoId",
          "in" : "path",
          "schema" : {
            "type" : "integer",
            "format" : "int64"
          }
        }, {
          "description" : "ID do pet.",
          "required" : true,
          "name" : "id",
          "in" : "path",
          "schema" : {
            "type" : "integer",
            "format" : "int64"
          }
        } ],
        "responses" : {
          "204" : {
            "description" : "Foto removida com sucesso."
          }
        },
        "security" : [ {
          "jwt" : [ ]
        } ]
      }
    },
    "/v1/tutores" : {
      "post" : {
        "summary" : "Cadastrar um novo tutor",
        "description" : "Cria um novo registro de tutor no sistema.",
        "tags" : [ "Tutores" ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/ProprietarioRequestDto"
              }
            }
          },
          "required" : true
        },
        "responses" : {
          "201" : {
            "description" : "Tutor cadastrado com sucesso.",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/ProprietarioResponseDto"
                }
              }
            }
          },
          "400" : {
            "description" : "Bad Request"
          }
        },
        "security" : [ {
          "jwt" : [ ]
        } ]
      },
      "get" : {
        "summary" : "Listar tutores",
        "description" : "Retorna uma lista paginada de tutores, com a opção de filtrar por nome.",
        "tags" : [ "Tutores" ],
        "parameters" : [ {
          "description" : "Filtrar tutores pelo nome.",
          "name" : "nome",
          "in" : "query",
          "schema" : {
            "type" : "string"
          }
        }, {
          "name" : "page",
          "in" : "query",
          "schema" : {
            "type" : "integer",
            "format" : "int32",
            "default" : 0,
            "minimum" : 0
          }
        }, {
          "name" : "size",
          "in" : "query",
          "schema" : {
            "type" : "integer",
            "exclusiveMinimum" : 0,
            "format" : "int32",
            "default" : 10
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "Lista de tutores retornada com sucesso.",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/PagedProprietarioResponseDto"
                }
              }
            }
          }
        },
        "security" : [ {
          "jwt" : [ ]
        } ]
      }
    },
    "/v1/tutores/{id}" : {
      "delete" : {
        "summary" : "Excluir um tutor",
        "description" : "Remove o registro de um tutor do sistema.",
        "tags" : [ "Tutores" ],
        "parameters" : [ {
          "description" : "ID do tutor a ser excluído.",
          "required" : true,
          "name" : "id",
          "in" : "path",
          "schema" : {
            "type" : "integer",
            "format" : "int64"
          }
        } ],
        "responses" : {
          "204" : {
            "description" : "Tutor excluído com sucesso."
          }
        },
        "security" : [ {
          "jwt" : [ ]
        } ]
      },
      "put" : {
        "summary" : "Atualizar um tutor existente",
        "description" : "Altera os dados de um tutor já cadastrado.",
        "tags" : [ "Tutores" ],
        "parameters" : [ {
          "description" : "ID do tutor a ser atualizado.",
          "required" : true,
          "name" : "id",
          "in" : "path",
          "schema" : {
            "type" : "integer",
            "format" : "int64"
          }
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/ProprietarioRequestDto"
              }
            }
          },
          "required" : true
        },
        "responses" : {
          "200" : {
            "description" : "Tutor atualizado com sucesso.",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/ProprietarioResponseDto"
                }
              }
            }
          },
          "400" : {
            "description" : "Bad Request"
          }
        },
        "security" : [ {
          "jwt" : [ ]
        } ]
      },
      "get" : {
        "summary" : "Buscar tutor por ID",
        "description" : "Retorna os dados de um tutor específico, incluindo a lista de seus pets, com base no ID fornecido.",
        "tags" : [ "Tutores" ],
        "parameters" : [ {
          "description" : "ID do tutor a ser consultado.",
          "required" : true,
          "name" : "id",
          "in" : "path",
          "schema" : {
            "type" : "integer",
            "format" : "int64"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "Tutor encontrado e retornado com sucesso.",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/ProprietarioResponseComPetsDto"
                }
              }
            }
          },
          "404" : {
            "description" : "Tutor não encontrado para o ID informado."
          }
        },
        "security" : [ {
          "jwt" : [ ]
        } ]
      }
    },
    "/v1/tutores/{id}/fotos" : {
      "post" : {
        "summary" : "Adicionar uma foto a um tutor",
        "description" : "Faz o upload de uma foto e a associa a um tutor existente.",
        "tags" : [ "Tutores" ],
        "parameters" : [ {
          "description" : "ID do tutor que receberá a foto.",
          "required" : true,
          "name" : "id",
          "in" : "path",
          "schema" : {
            "type" : "integer",
            "format" : "int64"
          }
        } ],
        "requestBody" : {
          "content" : {
            "multipart/form-data" : {
              "schema" : {
                "type" : "object",
                "properties" : {
                  "foto" : {
                    "type" : "string",
                    "format" : "binary"
                  }
                }
              }
            }
          },
          "required" : true
        },
        "responses" : {
          "201" : {
            "description" : "Foto adicionada com sucesso.",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/AnexoResponseDto"
                }
              }
            }
          }
        },
        "security" : [ {
          "jwt" : [ ]
        } ]
      }
    },
    "/v1/tutores/{id}/fotos/{fotoId}" : {
      "delete" : {
        "summary" : "Remover a foto de um tutor",
        "description" : "Exclui uma foto específica associada a um tutor.",
        "tags" : [ "Tutores" ],
        "parameters" : [ {
          "description" : "ID da foto a ser removida.",
          "required" : true,
          "name" : "fotoId",
          "in" : "path",
          "schema" : {
            "type" : "integer",
            "format" : "int64"
          }
        }, {
          "description" : "ID do tutor.",
          "required" : true,
          "name" : "id",
          "in" : "path",
          "schema" : {
            "type" : "integer",
            "format" : "int64"
          }
        } ],
        "responses" : {
          "204" : {
            "description" : "Foto removida com sucesso."
          }
        },
        "security" : [ {
          "jwt" : [ ]
        } ]
      }
    },
    "/v1/tutores/{id}/pets/{petId}" : {
      "post" : {
        "summary" : "Vincular um pet a um tutor",
        "description" : "Cria uma associação entre um pet e um tutor já existentes no sistema.",
        "tags" : [ "Tutores e Pets" ],
        "parameters" : [ {
          "description" : "ID do tutor.",
          "required" : true,
          "name" : "id",
          "in" : "path",
          "schema" : {
            "type" : "integer",
            "format" : "int64"
          }
        }, {
          "description" : "ID do pet a ser vinculado.",
          "required" : true,
          "name" : "petId",
          "in" : "path",
          "schema" : {
            "type" : "integer",
            "format" : "int64"
          }
        } ],
        "responses" : {
          "201" : {
            "description" : "Vínculo entre pet e tutor criado com sucesso."
          }
        },
        "security" : [ {
          "jwt" : [ ]
        } ]
      },
      "delete" : {
        "summary" : "Remover o vínculo de um pet com um tutor",
        "description" : "Exclui a associação entre um pet e um tutor.",
        "tags" : [ "Tutores e Pets" ],
        "parameters" : [ {
          "description" : "ID do tutor.",
          "required" : true,
          "name" : "id",
          "in" : "path",
          "schema" : {
            "type" : "integer",
            "format" : "int64"
          }
        }, {
          "description" : "ID do pet a ser desvinculado.",
          "required" : true,
          "name" : "petId",
          "in" : "path",
          "schema" : {
            "type" : "integer",
            "format" : "int32"
          }
        } ],
        "responses" : {
          "204" : {
            "description" : "Vínculo removido com sucesso."
          }
        },
        "security" : [ {
          "jwt" : [ ]
        } ]
      }
    }
  }
}